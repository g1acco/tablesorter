(function(factory){if (typeof define === 'function' && define.amd){define(['jquery'], factory);} else if (typeof module === 'object' && typeof module.exports === 'object'){module.exports = factory(require('jquery'));} else {factory(jQuery);}}(function(jQuery){
/*! Widget: math - updated 12/1/2019 (v2.31.2) */
(v=>{var _=v.tablesorter,x={error:{0:"Infinity result: Divide by zero",1:"Need more than one element to make this calculation",undef:"No elements found"},invalid:function(t,e,n){return console.warn(e,x.error[n]),t&&t.widgetOptions.math_none||""},events:"tablesorter-initialized update updateAll updateRows addRows updateCell filterReset ".split(" ").join(".tsmath "),processText:function(t,e){var n=t.widgetOptions,a=_.getElementText(t,e,x.getCellIndex(e)),r=t.widgetOptions.math_prefix;return n.math_textAttr&&(a=e.attr(n.math_textAttr)||a),/</.test(r)&&(e=v("<div>"+r+"</div>").text().replace(/\{content\}/g,"").trim(),a=a.replace(e,"")),a=_.formatFloat(a.replace(/[^\w,. \-()]/g,""),t.table)||0,isNaN(a)?0:a},getRow:function(t,e,n){var a=t.widgetOptions,r=[],l=e.closest("tr"),i=l.hasClass(a.filter_filteredRow||"filtered");return n&&(l=l.filter(n)),!n&&i||(n=l.children().not("["+a.math_dataAttrib+"=ignore]"),r=(n=a.math_ignore.length?n.filter(function(){return-1===v.inArray(x.getCellIndex(v(this)),a.math_ignore)}):n).not(e).map(function(){return x.processText(t,v(this))}).get()),r},getColumn:function(t,e,n,a){var r,l,i,o,h,d,s=t.widgetOptions,u=[],c=e.closest("tr"),g=s.math_dataAttrib,m="["+g+"=ignore]",f=s.filter_filteredRow||"filtered",p=x.getCellIndex(e),_=t.$table.children("tbody").children(),b=["["+g+"^=above]","["+g+"^=below]","["+g+"^=col]","["+g+"^=all]"];if("above"===n)for(r=o=_.index(c);0<=r;)d=(i=_.eq(r)).children().filter(b[0]).length,l=(i=a?i.filter(a):i).children().filter(function(){return x.getCellIndex(v(this))===p}),((a||!i.hasClass(f))&&i.not(m).length&&r!==o||d&&r!==o)&&(d?r=0:l.length&&l.not(m).length&&(u[u.length]=x.processText(t,l))),r--;else if("below"===n)for(o=_.length,r=_.index(c)+1;r<o&&!(i=_.eq(r)).children().filter(b[1]).length;r++)l=(i=a?i.filter(a):i).children().filter(function(){return x.getCellIndex(v(this))===p}),(a||!i.hasClass(f))&&i.not(m).length&&l.length&&l.not(m)&&(u[u.length]=x.processText(t,l));else for(o=(h=_.not(m)).length,r=0;r<o;r++)i=h.eq(r),l=(i=a?i.filter(a):i).children().filter(function(){return x.getCellIndex(v(this))===p}),!a&&i.hasClass(f)||!l.not(b.join(",")).length||l.is(e)||!l.not(m).length||(u[u.length]=x.processText(t,l));return u},getAll:function(t,e){for(var n,a,r,l,i,o,h=[],d=t.widgetOptions,s=d.math_dataAttrib,u="["+s+"=ignore]",c=d.filter_filteredRow||"filtered",g=t.$table.children("tbody").children().not(u),m=g.length,f=0;f<m;f++)if(r=g.eq(f),e&&(r=r.filter(e)),e||!r.hasClass(c))for(o=(l=r.children().not(u)).length,i=0;i<o;i++)n=l.eq(i),a=x.getCellIndex(n),!n.filter("["+s+"]").length&&v.inArray(a,d.math_ignore)<0&&(h[h.length]=x.processText(t,n));return h},setColumnIndexes:function(t){var e=t.$table,r=1,e=e.children("tbody").children().filter(function(){var t,e,n=v(this),a=0<n.children("[colspan]").length;if(1<r?(r--,a=!0):r<1&&(r=1),0<n.children("[rowspan]").length)for(t=this.cells,e=0;e<t.length;e++)r=Math.max(t[e].rowSpan,r);return a});_.computeColumnIndex(e,t)},getCellIndex:function(t){var e=t.attr("data-column");return void 0===e?t[0].cellIndex:parseInt(e,10)},recalculate:function(n,t,e){if(n&&(!t.math_isUpdating||e)){var a,r,l,i,o,h=!1,d={};for((n.debug||t.math_debug)&&(a=new Date),e&&x.setColumnIndexes(n),t.math_dataAttrib="data-"+(t.math_data||"math"),r=t.math_dataAttrib,l=n.$tbodies.children("tr").children("["+r+"]"),h=x.mathType(n,l,t.math_priority)||h,l=n.$table.children("."+n.cssInfoBlock+", tfoot").children("tr").children("["+r+"]"),x.mathType(n,l,t.math_priority),o=(l=n.$table.children().children("tr").children("["+r+"^=all]")).length,i=0;i<o;i++){var s=l.eq(i),u=s.attr(r+"-filter")||t.math_rowFilter;d[u]=d[u]?d[u].add(s):s}v.each(d,function(t,e){h=x.mathType(n,e,["all"],t)||h}),h?(t.math_isUpdating=!0,(n.debug||t.math_debug)&&console[console.group?"group":"log"]("Math widget updating the cache after recalculation"),_.updateCache(n,function(){x.updateComplete(n),e||"function"!=typeof t.math_completed||t.math_completed(n),(n.debug||t.math_debug)&&console.log("Math widget update completed"+_.benchmark(a))})):(e||"function"!=typeof t.math_completed||t.math_completed(n),(n.debug||t.math_debug)&&console.log("Math widget found no changes in data"+_.benchmark(a)))}},updateComplete:function(t){var e=t.widgetOptions;e.math_isUpdating&&(t.debug||e.math_debug)&&console.groupEnd&&console.groupEnd(),e.math_isUpdating=!1},mathType:function(d,s,t,u){var c,g,m,f,p;return!!s.length&&(g=!1,m=d.widgetOptions,f=m.math_dataAttrib,p=_.equations,"all"===t[0]&&(c=x.getAll(d,u)),(d.debug||m.math_debug)&&console[console.group?"group":"log"]("Tablesorter Math widget recalculation"),v.each(t,function(t,e){var n,a,r,l,i,o=s.filter("["+f+"^="+e+"]"),h=o.length;if(h){for((d.debug||m.math_debug)&&console[console.group?"group":"log"](e),n=0;n<h;n++)(i=o.eq(n)).parent().hasClass(m.filter_filteredRow||"filtered")||(u=i.attr(f+"-filter")||m.math_rowFilter,r=(i.attr(f)||"").replace(e+"-",""),a="row"===e?x.getRow(d,i,u):"all"===e?c:x.getColumn(d,i,e,u),p[r]&&(a.length?(l=p[r](a,d),(d.debug||m.math_debug)&&console.log(i.attr(f),u?'("'+u+'")':"",a,"=",l)):l=x.invalid(d,r,"mean"===r?0:"undef"),g=x.output(i,d,l,a)||g));(d.debug||m.math_debug)&&console.groupEnd&&console.groupEnd()}}),(d.debug||m.math_debug)&&console.groupEnd&&console.groupEnd(),g)},output:function(t,e,n,a){var r,l=e.widgetOptions,i=!1,o=t.html(),h=t.attr("data-"+l.math_data+"-mask")||l.math_mask,d=t.attr("data-"+l.math_data+"-target")||"",h=_.formatMask(h,n,l.math_prefix,l.math_suffix);return d&&(r=t.find(d)).length&&(t=r),!1!==(h="function"==typeof l.math_complete?l.math_complete(t,l,h,n,a):h)&&(i=o!==h,t.html(h)),!(i&&(!(r=t.closest("tbody")).length||r.hasClass(e.cssInfoBlock)||r.parent()[0]!==e.table))&&i}};_.formatMask=function(t,e,n,a){if(!t||isNaN(+e))return e;var r,l,i,o,h,d,s,u,c="",g=t.length,m=t.search(/[0-9\-\+#]/),f=0<m?t.substring(0,m):"",p=f;if(n&&(p=/\{content\}/.test(n||"")?(n||"").replace(/\{content\}/g,f||""):(n||"")+f),u=g-(n=t.split("").reverse().join("").search(/[0-9\-\+#]/)),u+="."===t.substring(u,u+1)?1:0,c=f=0<n?t.substring(u,g):"",a&&(c=/\{content\}/.test(a||"")?(a||"").replace(/\{content\}/g,f||""):f+(a||"")),n=(e="-"===(t=t.substring(m,u)).charAt(0)?-e:+e)<0?e=-e:0,a=(f=t.match(/[^\d\-\+#]/g))&&f[f.length-1]||".",r=f&&f[1]&&f[0]||",",t=t.split(a),e=+(e=e.toFixed(t[1]&&t[1].length))+"",m=t[1]&&t[1].lastIndexOf("0"),(!(o=e.split("."))[1]||(o[1],o[1].length<=m))&&(e=(+e).toFixed(m+1)),f=t[0].split(r),t[0]=f.join(""),-1<(l=t[0]&&t[0].indexOf("0")))for(;o[0].length<t[0].length-l;)o[0]="0"+o[0];else 0==+o[0]&&(o[0]="");if((e=e.split("."))[0]=o[0],i=f[1]&&f[f.length-1].length){for(d="",s=(h=e[0]).length%i,g=h.length,u=0;u<g;u++)d+=h.charAt(u),!((u-s+1)%i)&&u<g-i&&(d+=r);e[0]=d}return e[1]=t[1]&&e[1]?a+e[1]:"",p+(n?"-":"")+e[0]+e[1]+c},_.equations={count:function(t){return t.length},sum:function(t){for(var e=t.length,n=0,a=0;a<e;a++)n+=t[a];return n},mean:function(t){return _.equations.sum(t)/t.length},median:function(t,e){var n,a=t.length;return 1<a?(t.sort(function(t,e){return t-e}),n=Math.floor(a/2),a%2?t[n]:(t[n-1]+t[n])/2):x.invalid(e,"median",1)},mode:function(t){for(var e,n,a={},r=1,l=[t[0]],i=0;i<t.length;i++)a[e=t[i]]=a[e]?a[e]+1:1,r<(n=a[e])?(l=[e],r=n):n===r&&(l[l.length]=e,r=n);return l.sort(function(t,e){return t-e})},max:function(t){return Math.max.apply(Math,t)},min:function(t){return Math.min.apply(Math,t)},range:function(t){var e=t.sort(function(t,e){return t-e});return e[t.length-1]-e[0]},variance:function(t,e,n){for(var a=_.equations.mean(t),r=0,l=t.length;l--;)r+=Math.pow(t[l]-a,2);return 0==(e=t.length-(e?0:1))?x.invalid(n,"variance",0):r/e},varp:function(t,e){return _.equations.variance(t,!0,e)},vars:function(t,e){return _.equations.variance(t,!1,e)},stdevs:function(t,e){t=_.equations.variance(t,!1,e);return Math.sqrt(t)},stdevp:function(t,e){t=_.equations.variance(t,!0,e);return Math.sqrt(t)}},_.addWidget({id:"math",priority:100,options:{math_data:"math",math_debug:!1,math_ignore:[],math_mask:"#,##0.00",math_complete:null,math_completed:function(){},math_priority:["row","above","below","col"],math_prefix:"",math_suffix:"",math_textAttr:"",math_none:"N/A",math_event:"recalculate",math_rowFilter:""},init:function(t,e,n,a){var r=(_.hasWidget(t,"filter")?"filterEnd":"updateComplete")+".tsmath";x.events+=(_.hasWidget(t,"pager")?"pagerComplete":"filterEnd")+".tsmath ",n.$table.off((x.events+"updateComplete.tsmath "+a.math_event).replace(/\s+/g," ")).on(x.events+a.math_event,function(t){var e;this.hasInitialized&&(e="tablesorter-initialized"===t.type,a.math_isUpdating&&!e||(/filter/.test(t.type)||e||x.setColumnIndexes(n),x.recalculate(n,a,e)))}).on(r,function(){setTimeout(function(){x.updateComplete(n)},40)}),a.math_isUpdating=!1,t.hasInitialized&&x.recalculate(n,a,!0)},remove:function(t,e,n,a){a||e.$table.off((x.events+" updateComplete.tsmath "+n.math_event).replace(/\s+/g," ")).children().children("tr").children("[data-"+n.math_data+"]").empty()}})})(jQuery);return jQuery;}));
